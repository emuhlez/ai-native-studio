.viewport {
  flex: 1;
  min-height: 0;
  min-width: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  display: flex;
  flex-direction: column;
  /* Enable GPU acceleration for Safari/Arc */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

.canvas {
  flex: 1;
  min-height: 0;
  min-width: 0;
  width: 100%;
  height: 100%;
  position: relative;
  background: 
    radial-gradient(ellipse at center, var(--bg-surface200) 0%, var(--bg-surface0) 100%);
  overflow: hidden;
  /* Optimize rendering */
  contain: layout style paint;
}

.canvas3D {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  overflow: hidden;
  padding: 0;
  margin: 0;
  border: none;
  /* Allow canvas to receive events so scene objects are selectable; overlays use pointer-events: none */
  pointer-events: auto;
  /* GPU acceleration */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* Wrapper created by Viewport3D – locks canvas coordinate system */
.canvas3DInner {
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  padding: 0;
  margin: 0;
  /* GPU acceleration */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Canvas locked to container – fills .canvas3DInner, offset for toolbar/UI */
.viewport3dCanvas {
  position: absolute !important;
  top: -35px !important;
  right: 0 !important;
  bottom: 0 !important;
  left: -87px !important;
  width: 100% !important;
  height: 100% !important;
  display: block !important;
  margin: 0 !important;
  padding: 0 !important;
  /* Optimize WebGL rendering on Safari/Arc */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

.origin {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
  pointer-events: none;
}

.originX {
  position: absolute;
  width: 60px;
  height: 2px;
  background: linear-gradient(90deg, transparent, #e74c3c 20%, #e74c3c 80%, transparent);
  left: -30px;
  top: -1px;
}

.originY {
  position: absolute;
  width: 2px;
  height: 60px;
  background: linear-gradient(180deg, transparent, #2ecc71 20%, #2ecc71 80%, transparent);
  left: -1px;
  top: -30px;
}

.sceneObjects {
  position: absolute;
  left: 1px;
  top: -37px;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
}

.demoPlayer {
  position: absolute;
  top: 45%;
  left: 48%;
}

.objectMarker {
  width: 40px;
  height: 50px;
  background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
  border: 2px solid #5dade2;
  border-radius: 4px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 4px;
  font-size: 9px;
  color: white;
  font-weight: 500;
  box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
  transition: all var(--transition-fast);
}

.objectMarker[data-selected="true"] {
  border-color: var(--accent-primary);
  box-shadow: 0 0 0 2px var(--accent-glow), 0 4px 16px var(--accent-glow);
}

.demoGround {
  position: absolute;
  bottom: 25%;
  left: 50%;
  transform: translateX(-50%);
}

.groundTiles {
  width: 400px;
  height: 40px;
  background: 
    repeating-linear-gradient(
      90deg,
      #27ae60 0px,
      #27ae60 38px,
      #229954 38px,
      #229954 40px
    );
  border-top: 3px solid #2ecc71;
  border-radius: 2px;
}

.demoPlatform {
  position: absolute;
  top: 40%;
  left: 60%;
}

.demoPlatform .objectMarker {
  width: 80px;
  height: 20px;
  background: linear-gradient(135deg, #8e44ad 0%, #7d3c98 100%);
  border-color: #a569bd;
}

.info {
  position: absolute;
  top: 12px;
  left: 12px;
  display: flex;
  align-items: center;
  gap: 12px;
  z-index: 3;
  pointer-events: none;
}

.viewLabel {
  font-size: 11px;
  font-weight: 600;
  color: var(--content-muted);
  padding: 4px 8px;
  background: var(--bg-surface200);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-subtle);
}

.playingBadge {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-success);
  padding: 4px 10px;
  background: rgba(46, 204, 113, 0.1);
  border: 1px solid rgba(46, 204, 113, 0.3);
  border-radius: var(--radius-sm);
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.gizmoHint {
  position: absolute;
  bottom: 16px;
  left: 16px;
  z-index: 3;
  pointer-events: none;
}

.axisIndicator {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 8px;
  background: var(--bg-surface200);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-subtle);
}

.axisX, .axisY, .axisZ {
  font-size: 10px;
  font-weight: 700;
  font-family: var(--font-mono);
  padding: 2px 6px;
  border-radius: 2px;
}

.axisX {
  color: #e74c3c;
  background: rgba(231, 76, 60, 0.15);
}

.axisY {
  color: #2ecc71;
  background: rgba(46, 204, 113, 0.15);
}

.axisZ {
  color: #3498db;
  background: rgba(52, 152, 219, 0.15);
}

.selectionInfo {
  position: absolute;
  bottom: 16px;
  right: 16px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
  padding: 10px 14px;
  background: var(--bg-surface200);
  border-radius: var(--radius-md);
  border: 1px solid var(--accent-primary);
  box-shadow: var(--shadow-glow);
  z-index: 3;
  pointer-events: none;
}

.selectionName {
  font-size: 12px;
  font-weight: 600;
  color: var(--content-emphasis);
}

.selectionCoords {
  font-size: 11px;
  font-family: var(--font-mono);
  color: var(--content-muted);
}




